<html>
<head>
<title>Empanadas.io</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="referrer" content="origin">
<meta name="application-name" content="Cloudflare">
<meta name="msapplication-TileColor" content="#3a57e8">
<style>
@font-face {
    font-family: Poppins;
    src: url(Poppins.ttf) format("truetype");
}

* {
	text-align: center;
    font-family: poppins,sans-serif;
	overflow: hidden;
	user-select: none;
	transition: 0.5s all ease;
}
html, body {
	background-color: #3a57e8;
	color: white;
	font-size:32px;
	height: 100%;
}
img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 20%;
  margin-top: 180px;
}

footer p {
	margin-bottom: 10px;
	font-size: 18px;
	padding-left: 10%;
	padding-right: 10%;
	font-weight:300;
	color:#abbefc;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.0/animate.compat.css" crossorigin="anonymous">
</head>
<body>
<img class="animated fadeIn faster" style="animation-delay:250ms" id="logo" src="logo.png"></img>
<div class="animated fadeInUp" style="animation-delay:500ms;margin-top:20px;font-weight:1000;" id="msg">Empanadas.io</div>
<footer>
<p class="animated fadeInUp" style="animation-delay:525ms;" id="status">Communicating to Server...</p>
</footer>
<script>
const appbase = "https://empanadas.io/server/dashboard";
let appparam = "?usingnativeapp=1";
const start = Date.now();
const logo = document.getElementById("logo");
const msg = document.getElementById("msg");
const status = document.getElementById("status");
const minwait = 2250;
function noInt() {
	logo.src = "jeff.gif";
	logo.style.marginTop = "120px";
	msg.innerHTML = "&#x1F61E; Check Your Internet";
	status.innerHTML = "We were unable to talk to our empanada robots!<br>Double check that your beep-boop machines are on and within range.";
	setTimeout(function(){
		status.innerHTML = "Checking...";
		location.reload(true);
	}, 5000);
}
function finishedLoading() {
	if(navigator.onLine) {
		const end = Date.now();	
		setTimeout(function(){ 
			setTimeout(function(){ 
				if(!navigator.onLine) {
					noInt();
					return;
				}
				msg.style.display = "none";
				logo.style.display = "none";
				status.style.display = "none";
				msg.classList.remove("animated", "fadeOut", "faster");
				logo.classList.remove("animated", "fadeOut", "faster");
				status.classList.remove("animated", "fadeOut", "faster");
				window.location.href = appbase+appparam;
			}, 480);
			logo.classList.remove("animated", "fadeIn", "faster");
			msg.classList.remove("animated", "fadeInUp");
			status.classList.remove("animated", "fadeInUp");
			logo.style.animationDelay = "0s";
			msg.style.animationDelay = "0s";
			status.style.animationDelay = "0s";
			setTimeout(function(){ 
			msg.classList.add("animated", "fadeOut", "faster");
			logo.classList.add("animated", "fadeOut", "faster");
			status.classList.add("animated", "fadeOut", "faster");
			}, 250);
		}, minwait-(end-start));
	} else {
		noInt();
	}
}

let downloaded = 0;
function download(ds) {
	var i, max = 0;
    var o = null;

    for (i = 0, max = ds.length; i < max; i += 1) {
        o = document.createElement('object');
		o.onload = function() {
			downloaded++;
			status.innerHTML = "&#x1F4C1;  Updating:  <b>" + Math.min(Math.round((downloaded / max)*100), 100) + "%</b>";
            if (downloaded == max) {
				logo.style.marginTop = "200px";
				status.innerHTML = "";
                finishedLoading();
            }
        };
        o.data = ds[i];
        o.width  = 0;
        o.height = 0;
        document.body.appendChild(o);
	}
}
</script>
<script src="https://api.empanadas.io/app/startup.js" onerror="noInt()"></script>
</body>
</html>